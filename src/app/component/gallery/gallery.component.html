<div class="container my-5">

  <!-- ðŸ” ADMIN PANEL (hidden from public) -->
  <div *ngIf="isAdmin" class="mb-4 border p-3 rounded bg-light">
    <h5>Admin Gallery Manager</h5>

    <input type="file" class="form-control mb-2" (change)="onFileSelect($event)">
    <input type="text" class="form-control mb-2"
      placeholder="Image description"
      [(ngModel)]="description">
<div class="d-flex gap-2">
  <!-- Normal Save -->
  <button class="btn btn-danger" (click)="save()">
    {{ editId ? 'Update' : 'Add' }}
  </button>

  <!-- Save AFTER current image -->
  <button
    class="btn btn-outline-success"
    *ngIf="editId"
    (click)="saveWithPosition('after')">
    Save & Next
  </button>

  <!-- Save BEFORE current image -->
  <button
    class="btn btn-outline-warning"
    *ngIf="editId"
    (click)="saveWithPosition('before')">
    Save & Prev
  </button>
</div>

  </div>

  <!-- ðŸ–¼ï¸ PUBLIC GALLERY -->
  <h2 class="text-center mb-4" style="color: #800000;">
SA ELECTRONICS GALLERY
  </h2>

  <div class="row g-4">
  <div class="col-12 col-sm-6 col-md-4" *ngFor="let image of images">
  <div class="card shadow-sm h-100 position-relative">

    <!-- Image -->
    <img
      [src]="image.url"
      class="card-img-top gallery-img"
      (click)="openModal(image)"
    />

    <!-- View Icon (Public) -->
    <button
      class="btn btn-dark view-icon"
      (click)="openModal(image)"
      title="View Image"
    >
      <i class="fa fa-eye"></i>
    </button>

    <div class="card-body">
      <p class="card-text text-center">{{ image.description }}</p>

      <!-- ADMIN ACTIONS -->
      <div *ngIf="isAdmin" class="text-center">
        <button class="btn btn-sm btn-warning me-1" (click)="edit(image)">
          Edit
        </button>
        <button class="btn btn-sm btn-danger" (click)="delete(image.id)">
          Delete
        </button>
      </div>
    </div>

  </div>
</div>
<!-- IMAGE VIEW MODAL -->
<div class="image-modal" *ngIf="selectedImage">
  <span class="close-btn" (click)="closeModal()">&times;</span>

  <img
    [src]="selectedImage.url"
    class="modal-img"
  />

  <p class="modal-desc">{{ selectedImage.description }}</p>
</div>


  </div>
</div>
